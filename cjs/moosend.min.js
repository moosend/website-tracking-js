function _interopDefault(t){return t&&"object"==typeof t&&"default"in t?t["default"]:t}Object.defineProperty(exports,"__esModule",{value:!0});var FingerPrint=_interopDefault(require("fingerprintjs2")),commonjsGlobal="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function commonjsRequire(){throw Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function createCommonjsModule(t,e){return t(e={exports:{}},e.exports),e.exports}var es5Shim=createCommonjsModule(function(t,e){var r;r=function(){var t,e,r=Array,n=r.prototype,o=Object,i=o.prototype,a=Function,s=a.prototype,c=String,u=c.prototype,l=Number,f=l.prototype,p=n.slice,g=n.splice,d=n.push,h=n.unshift,y=n.concat,b=n.join,m=s.call,v=s.apply,T=Math.max,w=Math.min,j=i.toString,S="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,I=Function.prototype.toString,O=/^\s*class /,k=function(t){try{var e=I.call(t).replace(/\/\/.*\n/g,"").replace(/\/\*[.\s\S]*\*\//g,"").replace(/\n/gm," ").replace(/ {2}/g," ");return O.test(e)}catch(r){return!1}},E=function(t){if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if(S)return function(t){try{return!k(t)&&(I.call(t),!0)}catch(e){return!1}}(t);if(k(t))return!1;var e=j.call(t);return"[object Function]"===e||"[object GeneratorFunction]"===e},C=RegExp.prototype.exec;t=function(t){return"object"==typeof t&&(S?function(t){try{return C.call(t),!0}catch(e){return!1}}(t):"[object RegExp]"===j.call(t))};var A=String.prototype.valueOf;e=function(t){return"string"==typeof t||"object"==typeof t&&(S?function(t){try{return A.call(t),!0}catch(e){return!1}}(t):"[object String]"===j.call(t))};var P,D,$=o.defineProperty&&function(){try{var t={};for(var e in o.defineProperty(t,"x",{enumerable:!1,value:t}),t)return!1;return t.x===t}catch(r){return!1}}(),N=(P=i.hasOwnProperty,D=$?function(t,e,r,n){!n&&e in t||o.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:!0,value:r})}:function(t,e,r,n){!n&&e in t||(t[e]=r)},function(t,e,r){for(var n in e)P.call(e,n)&&D(t,n,e[n],r)}),_=function(t){var e=typeof t;return null===t||"object"!==e&&"function"!==e},x=l.isNaN||function(t){return t!=t},M=function(t){var e=+t;return x(e)?e=0:0!==e&&e!==1/0&&e!==-1/0&&(e=(e>0||-1)*Math.floor(Math.abs(e))),e},U=function(t){var e,r,n;if(_(t))return t;if(E(r=t.valueOf)&&(e=r.call(t),_(e)))return e;if(E(n=t.toString)&&(e=n.call(t),_(e)))return e;throw new TypeError},R=function(t){if(null==t)throw new TypeError("can't convert "+t+" to object");return o(t)},F=function(t){return t>>>0},G=function(){};N(s,{bind:function(t){var e=this;if(!E(e))throw new TypeError("Function.prototype.bind called on incompatible "+e);for(var r,n=p.call(arguments,1),i=T(0,e.length-n.length),s=[],c=0;i>c;c++)d.call(s,"$"+c);return r=a("binder","return function ("+b.call(s,",")+"){ return binder.apply(this, arguments); }")(function(){if(this instanceof r){var i=v.call(e,this,y.call(n,p.call(arguments)));return o(i)===i?i:this}return v.call(e,t,y.call(n,p.call(arguments)))}),e.prototype&&(G.prototype=e.prototype,r.prototype=new G,G.prototype=null),r}});var B=m.bind(i.hasOwnProperty),J=m.bind(i.toString),V=m.bind(p),q=v.bind(p);if("object"==typeof document&&document&&document.documentElement)try{V(document.documentElement.childNodes)}catch(ke){var L=V,K=q;V=function(t){for(var e=[],r=t.length;r-- >0;)e[r]=t[r];return K(e,L(arguments,1))},q=function(t,e){return K(V(t),e)}}var W=m.bind(u.slice),Z=m.bind(u.split),H=m.bind(u.indexOf),z=m.bind(d),Y=m.bind(i.propertyIsEnumerable),X=m.bind(n.sort),Q=r.isArray||function(t){return"[object Array]"===J(t)},tt=1!==[].unshift(0);N(n,{unshift:function(){return h.apply(this,arguments),this.length}},tt),N(r,{isArray:Q});var et=o("a"),rt="a"!==et[0]||!(0 in et),nt=function(t){var e=!0,r=!0,n=!1;if(t)try{t.call("foo",function(t,r,n){"object"!=typeof n&&(e=!1)}),t.call([1],function(){r="string"==typeof this},"x")}catch(ke){n=!0}return!!t&&!n&&e&&r};N(n,{forEach:function(t){var r,n=R(this),o=rt&&e(this)?Z(this,""):n,i=-1,a=F(o.length);if(arguments.length>1&&(r=arguments[1]),!E(t))throw new TypeError("Array.prototype.forEach callback must be a function");for(;++i<a;)i in o&&(void 0===r?t(o[i],i,n):t.call(r,o[i],i,n))}},!nt(n.forEach)),N(n,{map:function(t){var n,o=R(this),i=rt&&e(this)?Z(this,""):o,a=F(i.length),s=r(a);if(arguments.length>1&&(n=arguments[1]),!E(t))throw new TypeError("Array.prototype.map callback must be a function");for(var c=0;a>c;c++)c in i&&(s[c]=void 0===n?t(i[c],c,o):t.call(n,i[c],c,o));return s}},!nt(n.map)),N(n,{filter:function(t){var r,n,o=R(this),i=rt&&e(this)?Z(this,""):o,a=F(i.length),s=[];if(arguments.length>1&&(n=arguments[1]),!E(t))throw new TypeError("Array.prototype.filter callback must be a function");for(var c=0;a>c;c++)c in i&&(r=i[c],(void 0===n?t(r,c,o):t.call(n,r,c,o))&&z(s,r));return s}},!nt(n.filter)),N(n,{every:function(t){var r,n=R(this),o=rt&&e(this)?Z(this,""):n,i=F(o.length);if(arguments.length>1&&(r=arguments[1]),!E(t))throw new TypeError("Array.prototype.every callback must be a function");for(var a=0;i>a;a++)if(a in o&&!(void 0===r?t(o[a],a,n):t.call(r,o[a],a,n)))return!1;return!0}},!nt(n.every)),N(n,{some:function(t){var r,n=R(this),o=rt&&e(this)?Z(this,""):n,i=F(o.length);if(arguments.length>1&&(r=arguments[1]),!E(t))throw new TypeError("Array.prototype.some callback must be a function");for(var a=0;i>a;a++)if(a in o&&(void 0===r?t(o[a],a,n):t.call(r,o[a],a,n)))return!0;return!1}},!nt(n.some));var ot=!1;n.reduce&&(ot="object"==typeof n.reduce.call("es5",function(t,e,r,n){return n})),N(n,{reduce:function(t){var r=R(this),n=rt&&e(this)?Z(this,""):r,o=F(n.length);if(!E(t))throw new TypeError("Array.prototype.reduce callback must be a function");if(0===o&&1===arguments.length)throw new TypeError("reduce of empty array with no initial value");var i,a=0;if(arguments.length<2)for(;;){if(a in n){i=n[a++];break}if(++a>=o)throw new TypeError("reduce of empty array with no initial value")}else i=arguments[1];for(;o>a;a++)a in n&&(i=t(i,n[a],a,r));return i}},!ot);var it=!1;n.reduceRight&&(it="object"==typeof n.reduceRight.call("es5",function(t,e,r,n){return n})),N(n,{reduceRight:function(t){var r,n=R(this),o=rt&&e(this)?Z(this,""):n,i=F(o.length);if(!E(t))throw new TypeError("Array.prototype.reduceRight callback must be a function");if(0===i&&1===arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var a=i-1;if(arguments.length<2)for(;;){if(a in o){r=o[a--];break}if(0>--a)throw new TypeError("reduceRight of empty array with no initial value")}else r=arguments[1];if(0>a)return r;do{a in o&&(r=t(r,o[a],a,n))}while(a--);return r}},!it),N(n,{indexOf:function(t){var r=rt&&e(this)?Z(this,""):R(this),n=F(r.length);if(0===n)return-1;var o=0;for(arguments.length>1&&(o=M(arguments[1])),o=0>o?T(0,n+o):o;n>o;o++)if(o in r&&r[o]===t)return o;return-1}},n.indexOf&&!1),N(n,{lastIndexOf:function(t){var r=rt&&e(this)?Z(this,""):R(this),n=F(r.length);if(0===n)return-1;var o=n-1;for(arguments.length>1&&(o=w(o,M(arguments[1]))),o=0>o?n-Math.abs(o):o;o>=0;o--)if(o in r&&t===r[o])return o;return-1}},n.lastIndexOf&&!1);var at,st,ct=(st=(at=[1,2]).splice(),2===at.length&&Q(st)&&0===st.length);N(n,{splice:function(t,e){return 0===arguments.length?[]:g.apply(this,arguments)}},!ct);var ut,lt=(n.splice.call(ut={},0,0,1),1===ut.length);N(n,{splice:function(t,e){if(0===arguments.length)return[];var r=arguments;return this.length=T(M(this.length),0),arguments.length>0&&"number"!=typeof e&&(2>(r=V(arguments)).length?z(r,this.length-t):r[1]=M(e)),g.apply(this,r)}},!lt);var ft,pt=((ft=new r(1e5))[8]="x",ft.splice(1,1),7===ft.indexOf("x")),gt=function(){var t=[];return t[256]="a",t.splice(257,0,"b"),"a"===t[256]}();N(n,{splice:function(t,e){for(var r,n=R(this),o=[],i=F(n.length),a=M(t),s=0>a?T(i+a,0):w(a,i),u=w(T(M(e),0),i-s),l=0;u>l;)r=c(s+l),B(n,r)&&(o[l]=n[r]),l+=1;var f,p=V(arguments,2),g=p.length;if(u>g){l=s;for(var d=i-u;d>l;)r=c(l+u),f=c(l+g),B(n,r)?n[f]=n[r]:delete n[f],l+=1;l=i;for(var h=i-u+g;l>h;)delete n[l-1],l-=1}else if(g>u)for(l=i-u;l>s;)r=c(l+u-1),f=c(l+g-1),B(n,r)?n[f]=n[r]:delete n[f],l-=1;l=s;for(var y=0;p.length>y;++y)n[l]=p[y],l+=1;return n.length=i-u+g,o}},!pt||!gt);var dt,ht=n.join;try{dt="1,2,3"!==Array.prototype.join.call("123",",")}catch(ke){dt=!0}dt&&N(n,{join:function(t){var r=void 0===t?",":t;return ht.call(e(this)?Z(this,""):this,r)}},dt);var yt="1,2"!==[1,2].join(undefined);yt&&N(n,{join:function(t){return ht.call(this,void 0===t?",":t)}},yt);var bt=function(t){for(var e=R(this),r=F(e.length),n=0;arguments.length>n;)e[r+n]=arguments[n],n+=1;return e.length=r+n,r+n},mt=function(){var t={};return 1!==Array.prototype.push.call(t,undefined)||1!==t.length||"undefined"!=typeof t[0]||!B(t,0)}();N(n,{push:function(t){return Q(this)?d.apply(this,arguments):bt.apply(this,arguments)}},mt);var vt=function(){var t=[];return 1!==t.push(undefined)||1!==t.length||"undefined"!=typeof t[0]||!B(t,0)}();N(n,{push:bt},vt),N(n,{slice:function(t,r){var n=e(this)?Z(this,""):this;return q(n,arguments)}},rt);var Tt=function(){try{[1,2].sort(null)}catch(ke){try{[1,2].sort({})}catch(t){return!1}}return!0}(),wt=function(){try{return[1,2].sort(/a/),!1}catch(ke){}return!0}(),jt=function(){try{return[1,2].sort(undefined),!0}catch(ke){}return!1}();N(n,{sort:function(t){if(void 0===t)return X(this);if(!E(t))throw new TypeError("Array.prototype.sort callback must be a function");return X(this,t)}},Tt||!jt||!wt);var St=!Y({toString:null},"toString"),It=Y(function(){},"prototype"),Ot=!B("x","0"),kt=function(t){var e=t.constructor;return e&&e.prototype===t},Et={$window:!0,$console:!0,$parent:!0,$self:!0,$frame:!0,$frames:!0,$frameElement:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$external:!0,$width:!0,$height:!0,$top:!0,$localStorage:!0},Ct=function(){if("undefined"==typeof window)return!1;for(var t in window)try{!Et["$"+t]&&B(window,t)&&null!==window[t]&&"object"==typeof window[t]&&kt(window[t])}catch(ke){return!0}return!1}(),At=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Pt=At.length,Dt=function(t){return"[object Arguments]"===J(t)},$t=Dt(arguments)?Dt:function(t){return null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&!Q(t)&&E(t.callee)};N(o,{keys:function(t){var r=E(t),n=$t(t),o=null!==t&&"object"==typeof t,i=o&&e(t);if(!o&&!r&&!n)throw new TypeError("Object.keys called on a non-object");var a=[],s=It&&r;if(i&&Ot||n)for(var u=0;t.length>u;++u)z(a,c(u));if(!n)for(var l in t)s&&"prototype"===l||!B(t,l)||z(a,c(l));if(St)for(var f=function(t){if("undefined"==typeof window||!Ct)return kt(t);try{return kt(t)}catch(ke){return!1}}(t),p=0;Pt>p;p++){var g=At[p];f&&"constructor"===g||!B(t,g)||z(a,g)}return a}});var Nt=o.keys&&function(){return 2===o.keys(arguments).length}(1,2),_t=o.keys&&function(){var t=o.keys(arguments);return 1!==arguments.length||1!==t.length||1!==t[0]}(1),xt=o.keys;N(o,{keys:function(t){return $t(t)?xt(V(t)):xt(t)}},!Nt||_t);var Mt,Ut,Rt=0!==new Date(-0xc782b5b342b24).getUTCMonth(),Ft=new Date(-0x55d318d56a724),Gt=new Date(14496624e5),Bt="Mon, 01 Jan -45875 11:59:59 GMT"!==Ft.toUTCString();-720>Ft.getTimezoneOffset()?(Mt="Tue Jan 02 -45875"!==Ft.toDateString(),Ut=!/^Thu Dec 10 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(Gt+"")):(Mt="Mon Jan 01 -45875"!==Ft.toDateString(),Ut=!/^Wed Dec 09 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(Gt+""));var Jt=m.bind(Date.prototype.getFullYear),Vt=m.bind(Date.prototype.getMonth),qt=m.bind(Date.prototype.getDate),Lt=m.bind(Date.prototype.getUTCFullYear),Kt=m.bind(Date.prototype.getUTCMonth),Wt=m.bind(Date.prototype.getUTCDate),Zt=m.bind(Date.prototype.getUTCDay),Ht=m.bind(Date.prototype.getUTCHours),zt=m.bind(Date.prototype.getUTCMinutes),Yt=m.bind(Date.prototype.getUTCSeconds),Xt=m.bind(Date.prototype.getUTCMilliseconds),Qt=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],te=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ee=function(t,e){return qt(new Date(e,t,0))};N(Date.prototype,{getFullYear:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var t=Jt(this);return 0>t&&Vt(this)>11?t+1:t},getMonth:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var t=Jt(this),e=Vt(this);return 0>t&&e>11?0:e},getDate:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var t=Jt(this),e=Vt(this),r=qt(this);return 0>t&&e>11?12===e?r:ee(0,t+1)-r+1:r},getUTCFullYear:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var t=Lt(this);return 0>t&&Kt(this)>11?t+1:t},getUTCMonth:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var t=Lt(this),e=Kt(this);return 0>t&&e>11?0:e},getUTCDate:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var t=Lt(this),e=Kt(this),r=Wt(this);return 0>t&&e>11?12===e?r:ee(0,t+1)-r+1:r}},Rt),N(Date.prototype,{toUTCString:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var t=Zt(this),e=Wt(this),r=Kt(this),n=Lt(this),o=Ht(this),i=zt(this),a=Yt(this);return Qt[t]+", "+(10>e?"0"+e:e)+" "+te[r]+" "+n+" "+(10>o?"0"+o:o)+":"+(10>i?"0"+i:i)+":"+(10>a?"0"+a:a)+" GMT"}},Rt||Bt),N(Date.prototype,{toDateString:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var t=this.getDay(),e=this.getDate(),r=this.getMonth(),n=this.getFullYear();return Qt[t]+" "+te[r]+" "+(10>e?"0"+e:e)+" "+n}},Rt||Mt),(Rt||Ut)&&(Date.prototype.toString=function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var t=this.getDay(),e=this.getDate(),r=this.getMonth(),n=this.getFullYear(),o=this.getHours(),i=this.getMinutes(),a=this.getSeconds(),s=this.getTimezoneOffset(),c=Math.floor(Math.abs(s)/60),u=Math.floor(Math.abs(s)%60);return Qt[t]+" "+te[r]+" "+(10>e?"0"+e:e)+" "+n+" "+(10>o?"0"+o:o)+":"+(10>i?"0"+i:i)+":"+(10>a?"0"+a:a)+" GMT"+(s>0?"-":"+")+(10>c?"0"+c:c)+(10>u?"0"+u:u)},$&&o.defineProperty(Date.prototype,"toString",{configurable:!0,enumerable:!1,writable:!0}));var re=Date.prototype.toISOString&&-1===new Date(-621987552e5).toISOString().indexOf("-000001"),ne=Date.prototype.toISOString&&"1969-12-31T23:59:59.999Z"!==new Date(-1).toISOString(),oe=m.bind(Date.prototype.getTime);N(Date.prototype,{toISOString:function(){if(!isFinite(this)||!isFinite(oe(this)))throw new RangeError("Date.prototype.toISOString called on non-finite value.");var t=Lt(this),e=Kt(this);t+=Math.floor(e/12);var r=[(e=(e%12+12)%12)+1,Wt(this),Ht(this),zt(this),Yt(this)];t=(0>t?"-":t>9999?"+":"")+W("00000"+Math.abs(t),0>t||t>9999?-6:-4);for(var n=0;r.length>n;++n)r[n]=W("00"+r[n],-2);return t+"-"+V(r,0,2).join("-")+"T"+V(r,2).join(":")+"."+W("000"+Xt(this),-3)+"Z"}},re||ne),function(){try{return Date.prototype.toJSON&&null===new Date(NaN).toJSON()&&-1!==new Date(-621987552e5).toJSON().indexOf("-000001")&&Date.prototype.toJSON.call({toISOString:function(){return!0}})}catch(ke){return!1}}()||(Date.prototype.toJSON=function(t){var e=o(this),r=U(e);if("number"==typeof r&&!isFinite(r))return null;var n=e.toISOString;if(!E(n))throw new TypeError("toISOString property is not callable");return n.call(e)});var ie=1e15===Date.parse("+033658-09-27T01:46:40.000Z"),ae=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z"))||!isNaN(Date.parse("2012-12-31T23:59:60.000Z"));if(isNaN(Date.parse("2000-01-01T00:00:00.000Z"))||ae||!ie){var se=x(new Date(1970,0,1,0,0,0,2147483648).getTime());Date=function(t){var e=function(r,n,o,i,a,s,u){var l,f=arguments.length;if(this instanceof t){var p=s,g=u;if(se&&f>=7&&u>2147483647){var d=Math.floor(2147483647*Math.floor(u/2147483647)/1e3);p+=d,g-=1e3*d}l=1===f&&c(r)===r?new t(e.parse(r)):7>f?6>f?5>f?4>f?3>f?2>f?1>f?new t:new t(r instanceof t?+r:r):new t(r,n):new t(r,n,o):new t(r,n,o,i):new t(r,n,o,i,a):new t(r,n,o,i,a,p):new t(r,n,o,i,a,p,g)}else l=t.apply(this,arguments);return _(l)||N(l,{constructor:e},!0),l},r=/^(\d{4}|[+-]\d{6})(?:-(\d{2})(?:-(\d{2})(?:T(\d{2}):(\d{2})(?::(\d{2})(?:(\.\d{1,}))?)?(Z|(?:([-+])(\d{2}):(\d{2})))?)?)?)?$/,n=[0,31,59,90,120,151,181,212,243,273,304,334,365],o=function(t,e){var r=e>1?1:0;return n[e]+Math.floor((t-1969+r)/4)-Math.floor((t-1901+r)/100)+Math.floor((t-1601+r)/400)+365*(t-1970)};for(var i in t)B(t,i)&&(e[i]=t[i]);N(e,{now:t.now,UTC:t.UTC},!0),e.prototype=t.prototype,N(e.prototype,{constructor:e},!0);return N(e,{parse:function(e){var n=r.exec(e);if(n){var i,a=l(n[1]),s=l(n[2]||1)-1,c=l(n[3]||1)-1,u=l(n[4]||0),f=l(n[5]||0),p=l(n[6]||0),g=Math.floor(1e3*l(n[7]||0)),d=!(!n[4]||n[8]),h="-"===n[9]?1:-1,y=l(n[10]||0),b=l(n[11]||0);return(f>0||p>0||g>0?24:25)>u&&60>f&&60>p&&1e3>g&&s>-1&&12>s&&24>y&&60>b&&c>-1&&c<o(a,s+1)-o(a,s)&&(i=1e3*(60*((i=60*(24*(o(a,s)+c)+u+y*h))+f+b*h)+p)+g,d&&(i=function(e){var r=0,n=e;if(se&&n>2147483647){var o=Math.floor(2147483647*Math.floor(n/2147483647)/1e3);r+=o,n-=1e3*o}return l(new t(1970,0,1,0,0,r,n))}(i)),i>=-864e13&&864e13>=i)?i:NaN}return t.parse.apply(this,arguments)}}),e}(Date)}Date.now||(Date.now=function(){return(new Date).getTime()});var ce={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function(t,e){for(var r=-1,n=e;++r<ce.size;)ce.data[r]=(n+=t*ce.data[r])%ce.base,n=Math.floor(n/ce.base)},divide:function(t){for(var e=ce.size,r=0;--e>=0;)ce.data[e]=Math.floor((r+=ce.data[e])/t),r=r%t*ce.base},numToString:function(){for(var t=ce.size,e="";--t>=0;)if(""!==e||0===t||0!==ce.data[t]){var r=c(ce.data[t]);""===e?e=r:e+=W("0000000",0,7-r.length)+r}return e},pow:function Ee(t,e,r){return 0===e?r:e%2==1?Ee(t,e-1,r*t):Ee(t*t,e/2,r)},log:function(t){for(var e=0,r=t;r>=4096;)e+=12,r/=4096;for(;r>=2;)e+=1,r/=2;return e}};N(f,{toFixed:function(t){var e,r,n,o,i,a,s,u;if(e=l(t),0>(e=x(e)?0:Math.floor(e))||e>20)throw new RangeError("Number.toFixed called with invalid number of decimals");if(r=l(this),x(r))return"NaN";if(-1e21>=r||r>=1e21)return c(r);if(n="",0>r&&(n="-",r=-r),o="0",r>1e-21)if(a=0>(i=ce.log(r*ce.pow(2,69,1))-69)?r*ce.pow(2,-i,1):r/ce.pow(2,i,1),a*=4503599627370496,(i=52-i)>0){for(ce.multiply(0,a),s=e;s>=7;)ce.multiply(1e7,0),s-=7;for(ce.multiply(ce.pow(10,s,1),0),s=i-1;s>=23;)ce.divide(1<<23),s-=23;ce.divide(1<<s),ce.multiply(1,1),ce.divide(2),o=ce.numToString()}else ce.multiply(0,a),ce.multiply(1<<-i,0),o=ce.numToString()+W("0.00000000000000000000",2,2+e);return o=e>0?(u=o.length)>e?n+W(o,0,u-e)+"."+W(o,u-e):n+W("0.0000000000000000000",0,e-u+2)+o:n+o}},f.toFixed&&!1);var ue,le=function(){try{return"1"===1..toPrecision(undefined)}catch(ke){return!0}}(),fe=f.toPrecision;N(f,{toPrecision:function(t){return void 0===t?fe.call(this):fe.call(this,t)}},le),"".split(/.?/).length&&(ue="undefined"==typeof/()??/.exec("")[1],u.split=function(e,r){var n=this+"";if(void 0===e&&0===r)return[];if(!t(e))return Z(this,e,r);var o,i,a,s,c=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),l=0,f=RegExp(e.source,u+"g");ue||(o=RegExp("^"+f.source+"$(?!\\s)",u));var p=void 0===r?4294967295:F(r);for(i=f.exec(n);i&&((a=i.index+i[0].length)<=l||(z(c,W(n,l,i.index)),!ue&&i.length>1&&i[0].replace(o,function(){for(var t=1;arguments.length-2>t;t++)"undefined"==typeof arguments[t]&&(i[t]=void 0)}),i.length>1&&n.length>i.index&&d.apply(c,V(i,1)),s=i[0].length,l=a,p>c.length));)f.lastIndex===i.index&&f.lastIndex++,i=f.exec(n);return l===n.length?!s&&f.test("")||z(c,""):z(c,W(n,l)),c.length>p?V(c,0,p):c});var pe,ge=u.replace;1===(pe=[]).length&&"undefined"==typeof pe[0]||(u.replace=function(e,r){var n=E(r),o=t(e)&&/\)[*?]/.test(e.source);if(n&&o){return ge.call(this,e,function(t){var n=arguments.length,o=e.lastIndex;e.lastIndex=0;var i=e.exec(t)||[];return e.lastIndex=o,z(i,arguments[n-2],arguments[n-1]),r.apply(this,i)})}return ge.call(this,e,r)});var de=u.substr;N(u,{substr:function(t,e){var r=t;return 0>t&&(r=T(this.length+t,0)),de.call(this,r,e)}},"".substr&&!1);var he="\t\n\x0B\f\r   ᠎             　\u2028\u2029\ufeff",ye="["+he+"]",be=RegExp("^"+ye+ye+"*"),me=RegExp(ye+ye+"*$"),ve=u.trim&&(he.trim()||!1);N(u,{trim:function(){if(void 0===this||null===this)throw new TypeError("can't convert "+this+" to object");return c(this).replace(be,"").replace(me,"")}},ve);var Te=m.bind(String.prototype.trim);N(u,{lastIndexOf:function(t){if(void 0===this||null===this)throw new TypeError("can't convert "+this+" to object");for(var e=c(this),r=c(t),n=arguments.length>1?l(arguments[1]):NaN,o=x(n)?Infinity:M(n),i=w(T(o,0),e.length),a=r.length,s=i+a;s>0;){s=T(0,s-a);var u=H(W(e,s,i+a),r);if(-1!==u)return s+u}return-1}},u.lastIndexOf&&!1);var we,je,Se,Ie=u.lastIndexOf;if(N(u,{lastIndexOf:function(t){return Ie.apply(this,arguments)}},1!==u.lastIndexOf.length),8===parseInt(he+"08")&&22===parseInt(he+"0x16")||(we=parseInt,je=/^[-+]?0[xX]/,parseInt=function(t,e){var r=Te(t+""),n=l(e)||(je.test(r)?16:10);return we(r,n)}),1/parseFloat("-0")!=-Infinity&&(Se=parseFloat,parseFloat=function(t){var e=Te(t+""),r=Se(e);return 0===r&&"-"===W(e,0,1)?-0:r}),new RangeError("test")+""!="RangeError: test"){Error.prototype.toString=function(){if(void 0===this||null===this)throw new TypeError("can't convert "+this+" to object");var t=this.name;void 0===t?t="Error":"string"!=typeof t&&(t=c(t));var e=this.message;return void 0===e?e="":"string"!=typeof e&&(e=c(e)),t?e?t+": "+e:t:e}}if($){var Oe=function(t,e){if(Y(t,e)){var r=Object.getOwnPropertyDescriptor(t,e);r.configurable&&(r.enumerable=!1,Object.defineProperty(t,e,r))}};Oe(Error.prototype,"message"),""!==Error.prototype.message&&(Error.prototype.message=""),Oe(Error.prototype,"name")}},"function"==typeof undefined&&undefined.amd?undefined(r):t.exports=r()});function hasOwnProperty(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var isArray=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function parse(t,e,r,n){e=e||"&",r=r||"=";var o={};if("string"!=typeof t||0===t.length)return o;var i=/\+/g;t=t.split(e);var a=1e3;n&&"number"==typeof n.maxKeys&&(a=n.maxKeys);var s=t.length;a>0&&s>a&&(s=a);for(var c=0;s>c;++c){var u,l,f,p,g=t[c].replace(i,"%20"),d=g.indexOf(r);0>d?(u=g,l=""):(u=g.substr(0,d),l=g.substr(d+1)),f=decodeURIComponent(u),p=decodeURIComponent(l),hasOwnProperty(o,f)?isArray(o[f])?o[f].push(p):o[f]=[o[f],p]:o[f]=p}return o}var js_cookie=createCommonjsModule(function(t,e){!function(e){if("function"==typeof undefined&&undefined.amd&&(undefined(e),!0),t.exports=e(),!!0){var r=window.Cookies,n=window.Cookies=e();n.noConflict=function(){return window.Cookies=r,n}}}(function(){function t(){for(var t=0,e={};arguments.length>t;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}return function e(r){function n(e,o,i){var a;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(i=t({path:"/"},n.defaults,i)).expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*i.expires),i.expires=s}i.expires=i.expires?i.expires.toUTCString():"";try{a=JSON.stringify(o),/^[\{\[]/.test(a)&&(o=a)}catch(y){}o=r.write?r.write(o,e):encodeURIComponent(o+"").replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=(e=(e=encodeURIComponent(e+"")).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var c="";for(var u in i)i[u]&&(c+="; "+u,!0!==i[u]&&(c+="="+i[u]));return document.cookie=e+"="+o+c}e||(a={});for(var l=document.cookie?document.cookie.split("; "):[],f=/(%[0-9A-Z]{2})+/g,p=0;l.length>p;p++){var g=l[p].split("="),d=g.slice(1).join("=");this.json||'"'!==d.charAt(0)||(d=d.slice(1,-1));try{var h=g[0].replace(f,decodeURIComponent);if(d=r.read?r.read(d,h):r(d,h)||d.replace(f,decodeURIComponent),this.json)try{d=JSON.parse(d)}catch(y){}if(e===h){a=d;break}e||(a[h]=d)}catch(y){}}return a}}return n.set=n,n.get=function(t){return n.call(n,t)},n.getJSON=function(){return n.apply({json:!0},[].slice.call(arguments))},n.defaults={},n.remove=function(e,r){n(e,"",t(r,{expires:-1}))},n.withConverter=e,n}(function(){})})}),CookieStorage=function(){function t(t){this.cookieSettings=t}return t.prototype.getItem=function(t){return js_cookie.get(t)},t.prototype.setItem=function(t,e,r){js_cookie.set(t,e,r)},t.prototype.removeItem=function(t){js_cookie.remove(t)},t}(),Browser=function(){function t(){}return t.prototype.fingerPrint=function(t){var e;(new FingerPrint).get(function(r,n){e={browserHash:r},n.forEach(function(t){switch(t.key){case"language":e.language=t.value;break;case"color_depth":e.colorDepth=t.value;break;case"pixel_ratio":e.pixelRatio=t.value;break;case"resolution":case"available_resolution":e.screenResolution={height:t.value[1],width:t.value[0]};break;case"timezone_offset":e.timeZoneOffset=t.value;break;case"session_storage":e.sessionStorage=t.value;break;case"local_storage":e.localStorage=t.value;break;case"indexed_db":e.indexedDb=t.value;break;case"open_database":e.openDatabase=t.value;break;case"cpu_class":e.cpuClass=t.value;break;case"navigator_platform":e.navigatorPlatform=t.value;break;case"regular_plugins":e.plugins=t.value;break;case"canvas":e.canvas=t.value;break;case"webgl":e.webGl=t.value;break;case"adblock":e.adBlock=t.value;break;case"has_lied_languages":e.triedToHideLanguage=t.value;break;case"has_lied_resolution":e.triedToHideResolution=t.value;break;case"has_lied_os":e.triedToHideOs=t.value;break;case"has_lied_browser":e.triedToHideBrowser=t.value;break;case"touch_support":e.touchSupport=t.value[1];break;case"js_fonts":e.jsFonts=t.value}}),t(e)})},t}(),apiUrl="https://t.stat-track.com",config={apiUrl:apiUrl="https://t.stat-track-staging.com"},extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};function __extends(t,e){function r(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var __assign=Object.assign||function(t){for(var e,r=1,n=arguments.length;n>r;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},isArray$1=Array.isArray,objectProto=Object.prototype;function isPrototype(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||objectProto)}function overArg(t,e){return function(r){return t(e(r))}}var nativeKeys=overArg(Object.keys,Object),objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function baseKeys(t){if(!isPrototype(t))return nativeKeys(t);var e=[];for(var r in Object(t))hasOwnProperty$1.call(t,r)&&"constructor"!=r&&e.push(r);return e}var global$1="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},freeGlobal="object"==typeof global$1&&global$1&&global$1.Object===Object&&global$1,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),Symbol$1=root.Symbol,objectProto$2=Object.prototype,hasOwnProperty$2=objectProto$2.hasOwnProperty,nativeObjectToString=objectProto$2.toString,symToStringTag=Symbol$1?Symbol$1.toStringTag:undefined;function getRawTag(t){var e=hasOwnProperty$2.call(t,symToStringTag),r=t[symToStringTag];try{t[symToStringTag]=undefined;var n=!0}catch(i){}var o=nativeObjectToString.call(t);return n&&(e?t[symToStringTag]=r:delete t[symToStringTag]),o}var objectProto$3=Object.prototype,nativeObjectToString$1=objectProto$3.toString;function objectToString(t){return nativeObjectToString$1.call(t)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag$1=Symbol$1?Symbol$1.toStringTag:undefined;function baseGetTag(t){return null==t?t===undefined?undefinedTag:nullTag:symToStringTag$1&&symToStringTag$1 in Object(t)?getRawTag(t):objectToString(t)}function isObject(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(t){if(!isObject(t))return!1;var e=baseGetTag(t);return e==funcTag||e==genTag||e==asyncTag||e==proxyTag}var coreJsData=root["__core-js_shared__"],maskSrcKey=function(){var t=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function isMasked(t){return!!maskSrcKey&&maskSrcKey in t}var funcProto=Function.prototype,funcToString=funcProto.toString;function toSource(t){if(null!=t){try{return funcToString.call(t)}catch(e){}try{return t+""}catch(e){}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$4=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$3=objectProto$4.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$3).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(t){return!(!isObject(t)||isMasked(t))&&(isFunction(t)?reIsNative:reIsHostCtor).test(toSource(t))}function getValue(t,e){return null==t?undefined:t[e]}function getNative(t,e){var r=getValue(t,e);return baseIsNative(r)?r:undefined}var DataView=getNative(root,"DataView"),Map=getNative(root,"Map"),Promise$1=getNative(root,"Promise"),Set=getNative(root,"Set"),WeakMap=getNative(root,"WeakMap"),mapTag="[object Map]",objectTag="[object Object]",promiseTag="[object Promise]",setTag="[object Set]",weakMapTag="[object WeakMap]",dataViewTag="[object DataView]",dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),getTag=baseGetTag;(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise$1&&getTag(Promise$1.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag||WeakMap&&getTag(new WeakMap)!=weakMapTag)&&(getTag=function(t){var e=baseGetTag(t),r=e==objectTag?t.constructor:undefined,n=r?toSource(r):"";if(n)switch(n){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}return e});var getTag$1=getTag;function isObjectLike(t){return null!=t&&"object"==typeof t}var argsTag="[object Arguments]";function baseIsArguments(t){return isObjectLike(t)&&baseGetTag(t)==argsTag}var objectProto$5=Object.prototype,hasOwnProperty$4=objectProto$5.hasOwnProperty,propertyIsEnumerable=objectProto$5.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(t){return isObjectLike(t)&&hasOwnProperty$4.call(t,"callee")&&!propertyIsEnumerable.call(t,"callee")},MAX_SAFE_INTEGER=9007199254740991;function isLength(t){return"number"==typeof t&&t>-1&&t%1==0&&MAX_SAFE_INTEGER>=t}function isArrayLike(t){return null!=t&&isLength(t.length)&&!isFunction(t)}function stubFalse(){return!1}var freeExports="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer=moduleExports?root.Buffer:undefined,nativeIsBuffer=Buffer?Buffer.isBuffer:undefined,isBuffer=nativeIsBuffer||stubFalse,argsTag$1="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag$1="[object Function]",mapTag$1="[object Map]",numberTag="[object Number]",objectTag$1="[object Object]",regexpTag="[object RegExp]",setTag$1="[object Set]",stringTag="[object String]",weakMapTag$1="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};function baseIsTypedArray(t){return isObjectLike(t)&&isLength(t.length)&&!!typedArrayTags[baseGetTag(t)]}function baseUnary(t){return function(e){return t(e)}}typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag$1]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag$1]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag$1]=typedArrayTags[numberTag]=typedArrayTags[objectTag$1]=typedArrayTags[regexpTag]=typedArrayTags[setTag$1]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag$1]=!1;var freeExports$1="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal.process,nodeUtil=function(){try{return freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(t){}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,mapTag$2="[object Map]",setTag$2="[object Set]",objectProto$6=Object.prototype,hasOwnProperty$5=objectProto$6.hasOwnProperty;function isEmpty(t){if(null==t)return!0;if(isArrayLike(t)&&(isArray$1(t)||"string"==typeof t||"function"==typeof t.splice||isBuffer(t)||isTypedArray(t)||isArguments(t)))return!t.length;var e=getTag$1(t);if(e==mapTag$2||e==setTag$2)return!t.size;if(isPrototype(t))return!baseKeys(t).length;for(var r in t)if(hasOwnProperty$5.call(t,r))return!1;return!0}var getPrototype=overArg(Object.getPrototypeOf,Object),objectTag$2="[object Object]",funcProto$2=Function.prototype,objectProto$7=Object.prototype,funcToString$2=funcProto$2.toString,hasOwnProperty$6=objectProto$7.hasOwnProperty,objectCtorString=funcToString$2.call(Object);function isPlainObject(t){if(!isObjectLike(t)||baseGetTag(t)!=objectTag$2)return!1;var e=getPrototype(t);if(null===e)return!0;var r=hasOwnProperty$6.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&funcToString$2.call(r)==objectCtorString}var TrackerActions,empty={},empty$1=Object.freeze({"default":empty}),require$$0=empty$1&&empty||empty$1,randombytes=require$$0.randomBytes,uuidRandom=createCommonjsModule(function(t){!function(){var e,r,n=0,o=[];for(s.BUFFER_SIZE=512,s.bin=a,s.test=function(t){if("string"==typeof t)return/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/.test(t)},r=0;256>r;r++)o[r]=(r+256).toString(16).substr(1);if("function"==typeof commonjsRequire){var i=randombytes;t.exports=s}else"undefined"!=typeof window&&(window.uuid=s);function a(){var t=function(t){var o,a,c;if(void 0!==i){if(void 0===e||n+t>s.BUFFER_SIZE)if(n=0,i.getRandomValues)e=new Uint8Array(s.BUFFER_SIZE),i.getRandomValues(bytes);else{if(!i.randomBytes)throw Error("Non-standard crypto library");e=i.randomBytes(s.BUFFER_SIZE)}return e.slice(n,n+=t)}for(o=[],r=0;t>r;r++)o.push((a=0,c=255,Math.floor(Math.random()*(c-a))+a));return o}(16);return t[6]=15&t[6]|64,t[8]=63&t[8]|128,t}function s(){var t=a();return o[t[0]]+o[t[1]]+o[t[2]]+o[t[3]]+"-"+o[t[4]]+o[t[5]]+"-"+o[t[6]]+o[t[7]]+"-"+o[t[8]]+o[t[9]]+"-"+o[t[10]]+o[t[11]]+o[t[12]]+o[t[13]]+o[t[14]]+o[t[15]]}}()}),isValidUUID=function(t){var e=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;return e.test(t)||e.test(t.replace(/(\w{8})(\w{4})(\w{4})(\w{4})(\w{12})/gi,"$1-$2-$3-$4-$5"))};function toStr(t){return Object.prototype.toString.call(t)}function isString(t){return"[object String]"===toStr(t)}function isNumber(t){return"[object Number]"===toStr(t)||!isNaN(parseFloat(t))}function isUrl(t){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(t)}!function(t){t.ADDED_TO_ORDER="ADDED_TO_ORDER",t.EXIT="EXIT",t.IDENTIFY="IDENTIFY",t.ORDER_COMPLETED="ORDER_COMPLETED",t.PAGE_VIEWED="PAGE_VIEWED",t.PING="PING"}(TrackerActions||(TrackerActions={}));var TrackerActions$1=TrackerActions,TrackerMethods=function(){function t(t,e,r){this.agent=t,this.storage=e,this.browser=r}return t.prototype.identify=function(t,e,r){if(this._isInitialized()){var n;if(!t||!isString(t))throw Error("email cannot be undefined or empty");if(this.storage.getEmail()!==t){this.storage.setEmail(t);var o=this.siteId,i=this.storage.getCampaignId(),a=this.storage.getSessionId();n={ContactEmailAddress:t,ContactId:this.storage.getUserId(),actionType:TrackerActions$1.IDENTIFY,sessionId:a,siteId:o},e&&isString(e)&&(n.ContactName=e),i&&(n.CampaignId=i),r&&!isEmpty(r)&&(n.properties=r),this.agent.sendIdentify(n)}}},t.prototype.track=function(t,e){if(this._isInitialized()&&t&&isString(t)){if(isArray$1(e)&&e.length&&e[0].hasOwnProperty("product")){var r=e[0].product;r=this.formatProductPayload(r)}var n=this.getPayload(t,e);this.agent.sendTrack(n)}},t.prototype.trackPageView=function(t){if(this._isInitialized()){var e={ContactId:this.storage.getUserId(),Url:t||this.storage.getCurrentPageUrl(),actionType:TrackerActions$1.PAGE_VIEWED,sessionId:this.storage.getSessionId(),siteId:this.siteId},r=this.storage.getEmail(),n=this.storage.getCampaignId();r&&(e.ContactEmailAddress=r),n&&(e.CampaignId=n),this.agent.sendTrack(e)}},t.prototype.ping=function(t){if(this._isInitialized()){var e={BrowserComponents:t,ContactId:this.storage.getUserId(),actionType:TrackerActions$1.PING,sessionId:this.storage.getSessionId(),siteId:this.siteId},r=this.storage.getEmail(),n=this.storage.getCampaignId();r&&(e.ContactEmailAddress=r),n&&(e.CampaignId=n),this.agent.sendPing(e)}},t.prototype.trackAddToOrder=function(t,e,r,n,o,i,a,s){var c;if("object"==typeof t){if(t=this.formatProductPayload(t),e!==undefined&&!isPlainObject(e))throw Error("props should be a plain object eg : {props: value}");var u={itemCode:t.itemCode,itemPrice:t.itemPrice,itemQuantity:t.itemQuantity,itemTotalPrice:t.itemTotalPrice,itemUrl:t.itemUrl};return t.itemName&&(u=__assign({},u,{itemName:t.itemName})),t.itemImage&&(u=__assign({},u,{itemImage:t.itemImage})),isEmpty(e)||(u=__assign({},u,e)),c=this.getPayload(TrackerActions$1.ADDED_TO_ORDER,[{product:u}]),void this.agent.sendTrack(c)}if(!t)throw Error("itemCode cannot be empty");if(isNumber(e)&&e||(e=0,console.warn("itemPrice is missing, defaults to 0")),r&&isUrl(r)||(r=this.storage.getCurrentPageUrl(),console.warn("itemUrl is missing or invalid, defaults to current url")),isNumber(n)&&n||(n=1,console.warn("itemQuantity is missing, defaults to 1")),isNumber(o)&&o||(o=0,console.warn("itemTotalPrice is missing, defaults to 0")),a!==undefined&&!isUrl(a))throw Error("itemImage should be a valid url");if(s!==undefined&&!isPlainObject(s))throw Error("props should be a plain object eg : {props: value}");var l={itemCode:t,itemPrice:e,itemQuantity:n,itemTotalPrice:o,itemUrl:r};i&&(l=__assign({},l,{itemName:i})),a&&(l=__assign({},l,{itemImage:a})),isEmpty(s)||(l=__assign({},l,s)),c=this.getPayload(TrackerActions$1.ADDED_TO_ORDER,[{product:l}]),this.agent.sendTrack(c)},t.prototype.trackOrderCompleted=function(t,e){var r=this;if(!isArray$1(t))throw Error("products type should be an array");t.map(function(t){return r.formatProductPayload(t)});var n=this.getPayload(TrackerActions$1.ORDER_COMPLETED,[{products:t,totalPrice:e}]);this.agent.sendTrack(n)},t.prototype.setCookieNames=function(t){this.storage.setCookieNames(t)},t.prototype.init=function(t){var e=this;if(console.log(123),!t)throw Error("siteId cannot be undefined or empty");if(!isValidUUID(t))throw Error("siteId should be a valid uuid");this.siteId=t;var r=this.storage.getUserId(),n=this.storage.getSessionId();if(this.browser.fingerPrint(function(t){return e.ping(t)}),!r){var o=uuidRandom();o=o.replace(/-/g,""),this.storage.setUserId(o,{expires:3650})}if(!n){var i=uuidRandom();return i=i.replace(/-/g,""),void this.storage.setSessionId(i,{expires:1})}},t.prototype.getPayload=function(t,e){var r={ContactId:this.storage.getUserId(),actionType:t,sessionId:this.storage.getSessionId(),siteId:this.siteId},n=this.storage.getEmail(),o=this.storage.getCampaignId(),i=this.storage.getCurrentPageUrl();return n&&(r.ContactEmailAddress=n),o&&(r.CampaignId=o),e&&!isEmpty(e)&&(r.properties=e),i&&(r.Url=i),r},t.prototype.formatProductPayload=function(t){var e=JSON.stringify(t);if(!t.itemCode)throw Error("itemCode cannot be empty : "+e);if(isNumber(t.itemPrice)&&t.itemPrice||(t.itemPrice=0,console.warn("itemPrice is missing, defaults to 0")),t.itemUrl&&isUrl(t.itemUrl)||(t.itemUrl=this.storage.getCurrentPageUrl(),console.warn("itemUrl is missing or invalid, defaults to current url")),isNumber(t.itemQuantity)&&t.itemQuantity||(t.itemQuantity=1,console.warn("itemQuantity is missing, defaults to 1")),isNumber(t.itemTotalPrice)&&t.itemTotalPrice||(t.itemTotalPrice=0,console.warn("itemTotalPrice is missing, defaults to 0")),t.itemName!==undefined&&!isString(t.itemName))throw Error("itemName type should be a string : "+e);if(t.itemImage!==undefined&&!isUrl(t.itemImage))throw Error("itemImage should be a valid URL : "+e);return t},t.prototype._isInitialized=function(){return!!this.siteId||(console.warn("moo: You need initialize Tracker before it can be used"),!1)},t}(),json3=createCommonjsModule(function(t,e){(function(){var r="function"==typeof undefined&&undefined.amd,n={"function":!0,object:!0},o=n.object&&e&&!e.nodeType&&e,i=n[typeof window]&&window||this,a=o&&n.object&&t&&!t.nodeType&&"object"==typeof commonjsGlobal&&commonjsGlobal;function s(t,e){t||(t=i.Object()),e||(e=i.Object());var r=t.Number||i.Number,o=t.String||i.String,a=t.Object||i.Object,c=t.Date||i.Date,u=t.SyntaxError||i.SyntaxError,l=t.TypeError||i.TypeError,f=t.Math||i.Math,p=t.JSON||i.JSON;"object"==typeof p&&p&&(e.stringify=p.stringify,e.parse=p.parse);var g,d,h,y=a.prototype,b=y.toString,m=new c(-0xc782b5b800cec);try{m=-109252==m.getUTCFullYear()&&0===m.getUTCMonth()&&1===m.getUTCDate()&&10==m.getUTCHours()&&37==m.getUTCMinutes()&&6==m.getUTCSeconds()&&708==m.getUTCMilliseconds()}catch(U){}function v(t){if(v[t]!==h)return v[t];var n;if("bug-string-char-index"==t)n=!1;else if("json"==t)n=v("json-stringify")&&v("json-parse");else{var i,a='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==t){var s=e.stringify,u="function"==typeof s&&m;if(u){(i=function(){return 1}).toJSON=i;try{u="0"===s(0)&&"0"===s(new r)&&'""'==s(new o)&&s(b)===h&&s(h)===h&&s()===h&&"1"===s(i)&&"[1]"==s([i])&&"[null]"==s([h])&&"null"==s(null)&&"[null,null,null]"==s([h,b,null])&&s({a:[i,!0,!1,null,"\0\b\n\f\r\t"]})==a&&"1"===s(null,i)&&"[\n 1,\n 2\n]"==s([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==s(new c(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==s(new c(864e13))&&'"-000001-01-01T00:00:00.000Z"'==s(new c(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==s(new c(-1))}catch(U){u=!1}}n=u}if("json-parse"==t){var l=e.parse;if("function"==typeof l)try{if(0===l("0")&&!l(!1)){var f=5==(i=l(a)).a.length&&1===i.a[0];if(f){try{f=!l('"\t"')}catch(U){}if(f)try{f=1!==l("01")}catch(U){}if(f)try{f=1!==l("1.")}catch(U){}}}}catch(U){f=!1}n=f}}return v[t]=!!n}if(!v("json")){var T=v("bug-string-char-index");if(!m)var w=f.floor,j=[0,31,59,90,120,151,181,212,243,273,304,334],S=function(t,e){return j[e]+365*(t-1970)+w((t-1969+(e=+(e>1)))/4)-w((t-1901+e)/100)+w((t-1601+e)/400)};if((g=y.hasOwnProperty)||(g=function(t){var e,r={};return(r.__proto__=null,r.__proto__={toString:1},r).toString!=b?g=function(t){var e=this.__proto__,r=t in(this.__proto__=null,this);return this.__proto__=e,r}:(e=r.constructor,g=function(t){var r=(this.constructor||e).prototype;return t in this&&!(t in r&&this[t]===r[t])}),r=null,g.call(this,t)}),d=function(t,e){var r,o,i,a=0;for(i in(r=function(){this.valueOf=0}).prototype.valueOf=0,o=new r)g.call(o,i)&&a++;return r=o=null,a?d=2==a?function(t,e){var r,n={},o="[object Function]"==b.call(t);for(r in t)o&&"prototype"==r||g.call(n,r)||!(n[r]=1)||!g.call(t,r)||e(r)}:function(t,e){var r,n,o="[object Function]"==b.call(t);for(r in t)o&&"prototype"==r||!g.call(t,r)||(n="constructor"===r)||e(r);(n||g.call(t,r="constructor"))&&e(r)}:(o=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],d=function(t,e){var r,i,a="[object Function]"==b.call(t),s=!a&&"function"!=typeof t.constructor&&n[typeof t.hasOwnProperty]&&t.hasOwnProperty||g;for(r in t)a&&"prototype"==r||!s.call(t,r)||e(r);for(i=o.length;r=o[--i];s.call(t,r)&&e(r));}),d(t,e)},!v("json-stringify")){var I={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},O=function(t,e){return("000000"+(e||0)).slice(-t)},k=function(t){for(var e='"',r=0,n=t.length,o=!T||n>10,i=o&&(T?t.split(""):t);n>r;r++){var a=t.charCodeAt(r);switch(a){case 8:case 9:case 10:case 12:case 13:case 34:case 92:e+=I[a];break;default:if(32>a){e+="\\u00"+O(2,a.toString(16));break}e+=o?i[r]:t.charAt(r)}}return e+'"'},E=function(t,e,r,n,o,i,a){var s,c,u,f,p,y,m,v,T,j,I,C,A,P,D,$;try{s=e[t]}catch(U){}if("object"==typeof s&&s)if("[object Date]"!=(c=b.call(s))||g.call(s,"toJSON"))"function"==typeof s.toJSON&&("[object Number]"!=c&&"[object String]"!=c&&"[object Array]"!=c||g.call(s,"toJSON"))&&(s=s.toJSON(t));else if(s>-1/0&&1/0>s){if(S){for(p=w(s/864e5),u=w(p/365.2425)+1970-1;S(u+1,0)<=p;u++);for(f=w((p-S(u,0))/30.42);S(u,f+1)<=p;f++);p=1+p-S(u,f),m=w((y=(s%864e5+864e5)%864e5)/36e5)%24,v=w(y/6e4)%60,T=w(y/1e3)%60,j=y%1e3}else u=s.getUTCFullYear(),f=s.getUTCMonth(),p=s.getUTCDate(),m=s.getUTCHours(),v=s.getUTCMinutes(),T=s.getUTCSeconds(),j=s.getUTCMilliseconds();s=(u>0&&1e4>u?O(4,u):(0>u?"-":"+")+O(6,0>u?-u:u))+"-"+O(2,f+1)+"-"+O(2,p)+"T"+O(2,m)+":"+O(2,v)+":"+O(2,T)+"."+O(3,j)+"Z"}else s=null;if(r&&(s=r.call(e,t,s)),null===s)return"null";if("[object Boolean]"==(c=b.call(s)))return""+s;if("[object Number]"==c)return s>-1/0&&1/0>s?""+s:"null";if("[object String]"==c)return k(""+s);if("object"==typeof s){for(P=a.length;P--;)if(a[P]===s)throw l();if(a.push(s),I=[],D=i,i+=o,"[object Array]"==c){for(A=0,P=s.length;P>A;A++)C=E(A,s,r,n,o,i,a),I.push(C===h?"null":C);$=I.length?o?"[\n"+i+I.join(",\n"+i)+"\n"+D+"]":"["+I.join(",")+"]":"[]"}else d(n||s,function(t){var e=E(t,s,r,n,o,i,a);e!==h&&I.push(k(t)+":"+(o?" ":"")+e)}),$=I.length?o?"{\n"+i+I.join(",\n"+i)+"\n"+D+"}":"{"+I.join(",")+"}":"{}";return a.pop(),$}};e.stringify=function(t,e,r){var o,i,a,s;if(n[typeof e]&&e)if("[object Function]"==(s=b.call(e)))i=e;else if("[object Array]"==s){a={};for(var c,u=0,l=e.length;l>u;c=e[u++],("[object String]"==(s=b.call(c))||"[object Number]"==s)&&(a[c]=1));}if(r)if("[object Number]"==(s=b.call(r))){if((r-=r%1)>0)for(o="",r>10&&(r=10);r>o.length;o+=" ");}else"[object String]"==s&&(o=r.length>10?r.slice(0,10):r);return E("",((c={})[""]=t,c),i,a,o,"",[])}}if(!v("json-parse")){var C,A,P=o.fromCharCode,D={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},$=function(){throw C=A=null,u()},N=function(){for(var t,e,r,n,o,i=A,a=i.length;a>C;)switch(o=i.charCodeAt(C)){case 9:case 10:case 13:case 32:C++;break;case 123:case 125:case 91:case 93:case 58:case 44:return t=T?i.charAt(C):i[C],C++,t;case 34:for(t="@",C++;a>C;)if(32>(o=i.charCodeAt(C)))$();else if(92==o)switch(o=i.charCodeAt(++C)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:t+=D[o],C++;break;case 117:for(e=++C,r=C+4;r>C;C++)(48>(o=i.charCodeAt(C))||o>57)&&(97>o||o>102)&&(65>o||o>70)&&$();t+=P("0x"+i.slice(e,C));break;default:$()}else{if(34==o)break;for(o=i.charCodeAt(C),e=C;o>=32&&92!=o&&34!=o;)o=i.charCodeAt(++C);t+=i.slice(e,C)}if(34==i.charCodeAt(C))return C++,t;$();default:if(e=C,45==o&&(n=!0,o=i.charCodeAt(++C)),o>=48&&57>=o){for(48!=o||(48>(o=i.charCodeAt(C+1))||o>57)||$(),n=!1;a>C&&((o=i.charCodeAt(C))>=48&&57>=o);C++);if(46==i.charCodeAt(C)){for(r=++C;a>r&&((o=i.charCodeAt(r))>=48&&57>=o);r++);r==C&&$(),C=r}if(101==(o=i.charCodeAt(C))||69==o){for(43!=(o=i.charCodeAt(++C))&&45!=o||C++,r=C;a>r&&((o=i.charCodeAt(r))>=48&&57>=o);r++);r==C&&$(),C=r}return+i.slice(e,C)}if(n&&$(),"true"==i.slice(C,C+4))return C+=4,!0;if("false"==i.slice(C,C+5))return C+=5,!1;if("null"==i.slice(C,C+4))return C+=4,null;$()}return"$"},_=function(t){var e,r;if("$"==t&&$(),"string"==typeof t){if("@"==(T?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(e=[];"]"!=(t=N());r||(r=!0))r&&(","==t?"]"==(t=N())&&$():$()),","==t&&$(),e.push(_(t));return e}if("{"==t){for(e={};"}"!=(t=N());r||(r=!0))r&&(","==t?"}"==(t=N())&&$():$()),","!=t&&"string"==typeof t&&"@"==(T?t.charAt(0):t[0])&&":"==N()||$(),e[t.slice(1)]=_(N());return e}$()}return t},x=function(t,e,r){var n=M(t,e,r);n===h?delete t[e]:t[e]=n},M=function(t,e,r){var n,o=t[e];if("object"==typeof o&&o)if("[object Array]"==b.call(o))for(n=o.length;n--;)x(o,n,r);else d(o,function(t){x(o,t,r)});return r.call(t,e,o)};e.parse=function(t,e){var r,n;return C=0,A=""+t,r=_(N()),"$"!=N()&&$(),C=A=null,e&&"[object Function]"==b.call(e)?M(((n={})[""]=r,n),"",e):r}}}return e.runInContext=s,e}if(!a||a.global!==a&&a.window!==a&&a.self!==a||(i=a),o&&!r)s(i,o);else{var c=i.JSON,u=i.JSON3,l=!1,f=s(i,i.JSON3={noConflict:function(){return l||(l=!0,i.JSON=c,i.JSON3=u,c=u=null),f}});i.JSON={parse:f.parse,stringify:f.stringify}}r&&undefined(function(){return f})}).call(commonjsGlobal)}),TrackerAgent=function(){function t(t){void 0===t&&(t=config.apiUrl),this.url=t}return t.prototype.sendTrack=function(t){this._postData(this.url+"/track",t)},t.prototype.sendIdentify=function(t){this._postData(this.url+"/identify",t)},t.prototype.sendPing=function(t){this._postData(this.url+"/ping",t)},t.prototype._postData=function(t,e){post(t,e,function(){})},t}();function post(t,e,r){var n;window.XDomainRequest?(n=new XDomainRequest).onload=function(){r(n.responseText)}:n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),n.onreadystatechange=function(){4===n.readyState&&200===n.status&&r(n.responseText)},n.open("POST",t,!0),n.setRequestHeader("Accept","application/json"),n.setRequestHeader("Content-Type","application/json"),n.send(json3.stringify(e))}var CookieKeys,CookieNames=function(){function t(t,e,r){void 0===t&&(t="uid"),void 0===e&&(e="sessionid"),void 0===r&&(r="email"),this.userIdName=t,this.sessionIdName=e,this.emailName=r}return t.prototype.getUserIdName=function(){return this.userIdName},t.prototype.setUserIdName=function(t){this.userIdName=t},t.prototype.getSessionIdName=function(){return this.sessionIdName},t.prototype.setSessionIdName=function(t){this.sessionIdName=t},t.prototype.getEmailName=function(){return this.emailName},t.prototype.setEmailName=function(t){this.emailName=t},t}();!function(t){t.CAMPAIGN_ID="cmid"}(CookieKeys||(CookieKeys={}));var TrackerStorage=function(t){function e(e){var r=t.call(this)||this;return r.storage=e,r}return __extends(e,t),e.prototype.setCookieNames=function(t){for(var e in t)if(e){if("userIdName"===e){var r=this.storage.getItem(t[e]);if(!r||!isValidUUID(r))throw Error("Property "+e+" is empty or has invalid UUID.");this.setUserIdName(t[e])}"emailName"===e&&this.setEmailName(t[e])}},e.prototype.getUserId=function(){return this.storage.getItem(this.userIdName)},e.prototype.setUserId=function(t,e){this.storage.setItem(this.userIdName,t,e)},e.prototype.getCampaignId=function(){return this.storage.getItem(e.Keys.CAMPAIGN_ID)},e.prototype.setCampaignId=function(t){this.storage.setItem(e.Keys.CAMPAIGN_ID,t)},e.prototype.getEmail=function(){return this.storage.getItem(this.emailName)},e.prototype.setEmail=function(t){this.storage.setItem(this.emailName,t)},e.prototype.getSessionId=function(){return this.storage.getItem(this.sessionIdName)},e.prototype.setSessionId=function(t,e){this.storage.setItem(this.sessionIdName,t,e)},e.prototype.getCurrentPageUrl=function(){return window.location.href},e.Keys=CookieKeys,e}(CookieNames),TrackerFactory={CreateWithCookieStorageInstance:null,CreateWithCookieStorage:function(t){return null!==this.CreateWithCookieStorageInstance?this.CreateWithCookieStorageInstance:(this.CreateWithCookieStorageInstance=new TrackerMethods(new TrackerAgent(config.apiUrl),new TrackerStorage(new CookieStorage(t)),new Browser),this.CreateWithCookieStorageInstance)}},trackerStorage=new TrackerStorage(new CookieStorage),tracker=TrackerFactory.CreateWithCookieStorage();if("object"==typeof location&&location.search){var queryStringValues=parse(location.search.replace("?",""));queryStringValues.cmid&&trackerStorage.setCampaignId(queryStringValues.cmid),queryStringValues.cid&&trackerStorage.setUserId(queryStringValues.cid)}var API_KEY="mootrack",trackerStub="undefined"!=typeof window?window[API_KEY]:[];function callTrackerMethod(){var t=Array.prototype.slice.call(arguments),e=t.length?t[0]:"",r=t.slice(1,t.length);if("function"!=typeof tracker[e])tracker.track.apply(tracker,[e].concat(r));else try{tracker[e].apply(tracker,r)}catch(n){console.error(n)}}global[API_KEY]=callTrackerMethod,console.log(123),"function"==typeof trackerStub&&"object"==typeof trackerStub.q&&trackerStub.q.length&&trackerStub.q.forEach(function(t){callTrackerMethod.apply(tracker,t)}),exports["default"]=tracker;
